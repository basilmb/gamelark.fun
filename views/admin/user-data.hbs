<section class="main-content w-100" style="background-color: black;">
  <div class="container mt-4 px-5">
    <h3>Users Management</h3>
    <table class="table">
      <thead>
        <tr>
          <th>User</th>
          <th>Status</th>
          <th>Email</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each userInfo}}
          <tr>
            <td>
              <div class="user-info">
                <div class="user-info__img">
                <img
                  src="/users-image/{{image.[0]}}"
                  alt="User Img"
                />
                </div>
                <div class="user-info__basic">
                  <h6 class="mb-0">{{name}}</h6>
                </div>
              </div>
            </td>
            {{#if active}}
              <td>
                <span class="active-circle bg-success"></span>
                Active
              </td>
            {{else}}
              <td>
                <span class="active-circle bg-danger"></span>
                Inactive
              </td>
            {{/if}}
            <td>{{email}}</td>
            {{#if active}}
              <td>
              <button class="btn" onclick="showBlockConfirmation('{{_id}}')">block</button>
              </td>
            {{else}}
              <td>
              <button class="btn" onclick="location.href='/admin/unblock/{{_id}}'">unblock</button>
              </td>
            {{/if}}
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.6"></script>

<script>
function showBlockConfirmation(id) {
  Swal.fire({
    title: 'Are you sure?',
    text: 'You are about to block this user',
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Yes, block user'
  }).then((result) => {
    if (result.isConfirmed) {
      location.href = '/admin/block/' + id;
    }
  });
}
</script>